<div class="cloudinary-image-container" [class.loading]="isLoading()" [class.error]="hasError()">
  <!-- Placeholder pendant le chargement -->
  <div class="image-placeholder" *ngIf="isLoading() && placeholder">
    <svg class="placeholder-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <circle cx="8.5" cy="8.5" r="1.5"></circle>
      <polyline points="21 15 16 10 5 21"></polyline>
    </svg>
  </div>

  <!-- Image optimisÃ©e -->
  <img
    *ngIf="optimizedUrl() && !hasError()"
    [src]="optimizedUrl()"
    [alt]="alt"
    [loading]="lazy ? 'lazy' : 'eager'"
    [width]="width"
    [height]="height"
    (load)="onLoad()"
    (error)="onError()"
    class="cloudinary-image"
  />

  <!-- Erreur -->
  <div class="image-error" *ngIf="hasError()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <p>Erreur de chargement</p>
  </div>
</div>

