<div class="orders-list-page">
  <div class="orders-header">
    <div>
      <h1>Mes commandes</h1>
      <p class="subtitle">Consultez l'historique et le statut de toutes vos commandes</p>
    </div>
    <div class="header-stats" *ngIf="!isLoading() && orders().length > 0">
      <div class="stat-item">
        <span class="stat-value">{{ orders().length }}</span>
        <span class="stat-label">Commande(s)</span>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="orders-filters" *ngIf="!isLoading() && orders().length > 0">
    <div class="filter-group">
      <input
        type="text"
        class="search-input"
        placeholder="Rechercher par numéro de commande..."
        [value]="searchTerm()"
        (input)="onSearchChange($any($event.target).value)"
      />
    </div>
    <div class="filter-group">
      <select
        class="status-select"
        [value]="selectedStatus()"
        (change)="onStatusChange($any($event.target).value)"
      >
        <option *ngFor="let option of statusOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
    </div>
    <button
      class="clear-filters-btn"
      *ngIf="hasActiveFilters"
      (click)="clearFilters()"
    >
      Réinitialiser
    </button>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading()">
    <div class="spinner"></div>
    <p>Chargement de vos commandes...</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading() && orders().length === 0">
    <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <path d="M16 10a4 4 0 0 1-8 0"></path>
    </svg>
    <h2>Aucune commande</h2>
    <p>Vous n'avez pas encore passé de commande</p>
    <button class="btn-primary" routerLink="/client/catalogue">
      Découvrir nos produits
    </button>
  </div>

  <!-- No Results -->
  <div class="empty-state" *ngIf="!isLoading() && orders().length > 0 && filteredOrders().length === 0">
    <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"></circle>
      <path d="M21 21l-4.35-4.35"></path>
    </svg>
    <h2>Aucune commande trouvée</h2>
    <p>Essayez de modifier vos critères de recherche</p>
    <button class="btn-primary" (click)="clearFilters()">
      Réinitialiser les filtres
    </button>
  </div>

  <!-- Orders List -->
  <div class="orders-grid" *ngIf="!isLoading() && filteredOrders().length > 0">
    <div class="order-card" *ngFor="let order of filteredOrders()" [routerLink]="['/client/commandes', order.id]">
      <div class="order-card-header">
        <div class="order-number">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
          </svg>
          <span>{{ order.orderNumber }}</span>
        </div>
        <div class="order-status" [style.background-color]="getStatusColor(order.status) + '20'" [style.color]="getStatusColor(order.status)">
          {{ getStatusLabel(order.status) }}
        </div>
      </div>

      <div class="order-card-body">
        <div class="order-info-row">
          <div class="info-item">
            <label>Date</label>
            <span>{{ order.createdAt | date:'shortDate':'fr-FR' }}</span>
          </div>
          <div class="info-item">
            <label>Articles</label>
            <span>{{ getItemCount(order) }} article(s)</span>
          </div>
        </div>

        <div class="order-items-preview">
          <div class="preview-item" *ngFor="let item of order.items.slice(0, 3)">
            <span class="item-name">{{ item.productName }}</span>
            <span class="item-quantity">x{{ item.quantity }}</span>
          </div>
          <div class="more-items" *ngIf="order.items.length > 3">
            +{{ order.items.length - 3 }} autre(s) article(s)
          </div>
        </div>
      </div>

      <div class="order-card-footer">
        <div class="order-total">
          <span class="total-label">Total</span>
          <span class="total-value">{{ order.total | price }}</span>
        </div>
        <div class="order-actions">
          <button class="view-btn" (click)="$event.stopPropagation(); viewOrder(order.id)">
            Voir détails
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

